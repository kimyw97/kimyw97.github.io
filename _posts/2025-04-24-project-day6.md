---
layout: post
title: "2025.04.24 - STM32 & A4988 ê¸°ë°˜ ìŠ¤í…ëª¨í„° ì œì–´ ë””ë²„ê¹…"
date: 2025-04-24 14:00:00 +0900
categories: kongi-patji project
---

## ğŸ“Œ ì˜¤ëŠ˜ í•œ ì¼
- STM32 + A4988 + CNC Shieldë¥¼ ì‚¬ìš©í•œ Nema17 ìŠ¤í…ëª¨í„° ì œì–´ íšŒë¡œ êµ¬ì„±
- FreeRTOS ê¸°ë°˜ ëª¨í„° ì œì–´ ë¡œì§ ì‘ì„±
- 5V ì „ì› ê´€ë ¨ ë””ë²„ê¹… ë° CNC Shield ì—°ê²° ë¬¸ì œ í™•ì¸

---

## âš™ï¸ ì‹œìŠ¤í…œ êµ¬ì„±

### ğŸ’¡ í•˜ë“œì›¨ì–´
- STM32F4 Discovery
- A4988 ë“œë¼ì´ë²„ (CNC Shield V3)
- Nema17 ìŠ¤í…ëª¨í„° (17HS3401)
- 24V ëª¨í„° ì „ì›
- ê³µí†µ GND, 5V ì—°ê²° ì£¼ì˜

### ğŸ“Œ ì—°ê²° ìš”ì•½
| STM32 í•€ | CNC Shield ìƒë‹¨ í•€ | ê¸°ëŠ¥ |
|----------|--------------------|------|
| GPIO     | STEP               | Step ì‹ í˜¸ ì¶œë ¥ |
| GPIO     | DIR                | ë°©í–¥ ì œì–´ |
| GPIO     | EN                 | ë“œë¼ì´ë²„ Enable |
| 5V       | VDD                | ë…¼ë¦¬ ì „ì› (ê¶Œì¥: ì™¸ë¶€ ì•ˆì •ëœ 5V) |
| GND      | GND                | ê³µí†µ ì ‘ì§€ |
| 24V      | VMOT               | ëª¨í„° ì „ì› (A4988 ê¸°ì¤€) |

> **ì£¼ì˜**: STM32 ë³´ë“œì˜ 5V ì¶œë ¥ì„ CNC Shield ì „ì›ìœ¼ë¡œ ì“°ëŠ” ê²ƒì€ ê¶Œì¥í•˜ì§€ ì•ŠìŒ. ì „ì•• ê°•í•˜ ë° ì „ë¥˜ ë¶€ì¡± ê°€ëŠ¥ì„± ìˆìŒ.

---

## ğŸ” ë¬¸ì œ ìƒí™© ë° ì ê²€ ë‚´ìš©

| ì²´í¬ í•­ëª© | ìƒíƒœ |
|-----------|------|
| âœ… 24V Vmot ê³µê¸‰ë¨ | âœ”ï¸ |
| âš ï¸ Vref ì „ì•• ë„ˆë¬´ ë‚®ì§€ ì•Šì€ì§€ | âœ”ï¸ |
| âš ï¸ ë§ˆì´í¬ë¡œìŠ¤í… ì í¼ ì œê±° (Full Stepë¡œ í…ŒìŠ¤íŠ¸) | âœ”ï¸ |
| âš ï¸ STEP ì‹ í˜¸ë¥¼ delay_us()ë¡œ ìƒì„±í•˜ê³  ìˆëŠ”ì§€ | âœ”ï¸ |
| âš ï¸ EN í•€ LOWë¡œ ì„¤ì •ë¨ | âœ”ï¸ |
| âš ï¸ ëª¨í„° ë°°ì„ ì´ ì˜¬ë°”ë¥´ê²Œ ì—°ê²°ë˜ì—ˆëŠ”ì§€ | âœ”ï¸ |

### â• ì¶”ê°€ í™•ì¸
- A4988 ëª¨ë“ˆ ë‹¨ë… Arduino ì œì–´ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¬¸ì œ ì—†ìŒ
- STM32ì˜ 5V í•€ ì „ì•• ì¸¡ì • ê²°ê³¼: ì•½ 4.65Vë¡œ, CNC Shield ë™ì‘ ë¶ˆì•ˆì • ê°€ëŠ¥ì„± ìˆìŒ
- ì‰´ë“œ A4988 ëª¨ë“ˆ ê¸°ì¤€ VDD í•€ a, b ì¤‘ **aë§Œ 3V ì¶œë ¥** í™•ì¸ â†’ í•€ ë¶ˆëŸ‰ ì—†ìŒ

---

## ğŸ§ª ë””ë²„ê¹… ë° ê°œì„  ë°©í–¥

1. **ì™¸ë¶€ 5V ë ˆê·¤ë ˆì´í„° ì‚¬ìš©** ì¶”ì²œ
   - STM32 ë³´ë“œê°€ ê³µê¸‰í•˜ëŠ” 5VëŠ” ì „ë¥˜ ìš©ëŸ‰ì´ ì‘ì•„ A4988 + CNC Shield êµ¬ë™ì—ëŠ” ë¶€ì¡±í•  ìˆ˜ ìˆìŒ

2. **GND ê³µí†µ í•„ìˆ˜**
   - STM32, ì™¸ë¶€ ì „ì›, CNC Shield ê°„ GND ë°˜ë“œì‹œ ì—°ê²°


## stm32ëŒ€ì‹  ì•„ë‘ì´ë…¸ ì‚¬ìš©
- stm32ì—ì„œ ë‚˜ì˜¤ëŠ” ì „ì••ì€ 4.65v
- A4988 ë¡œì§ì„ ëŒë¦¬ê¸°ì—ëŠ” ë¶€ì¡±í•œê²ƒìœ¼ë¡œ ë³´ì„ => ë½ì€ ê±¸ë¦¬ì§€ë§Œ ì œì–´ê°€ ì•ˆë˜ê³  aí•€(í˜¹ì€ b)ì—ì„œë§Œ ì „ì••ì´ ì¸¡ì •ë¨
- stm32ì—ì„œ ì•„ë‘ì´ë…¸ì™€ ì‹œë¦¬ì–¼ í†µì‹ ìœ¼ë¡œ raspberrypi -> stm32 -> arduino
- 
---
