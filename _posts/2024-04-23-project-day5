---
layout: post
title: "2025.04.23 - Raspberry Pi ROS2 ìë™ ì„¤ì¹˜ ë° ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸"
date: 2025-04-23 10:00:00 +0900
categories: ros2 raspberrypi automation
---

## ğŸ“Œ ëª©ì 

Raspberry Piì—ì„œ ROS 2 Humble í™˜ê²½ì„ ìë™ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³ , GitHub ì €ì¥ì†Œì—ì„œ í”„ë¡œì íŠ¸ë¥¼ í´ë¡ í•˜ì—¬ `ros2_ws`ë¥¼ ë¹Œë“œí•˜ëŠ” ìë™í™” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í–ˆë‹¤. ì´ˆê¸° í™˜ê²½ ì…‹ì—…ì´ ë³µì¡í•˜ê³  ë²ˆê±°ë¡­ê¸° ë•Œë¬¸ì— í•œ ì¤„ë¡œ ëª¨ë“  ì„¤ì •ì„ ë§ˆì¹  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆë‹¤.

---

## ğŸ§¾ ì‘ì—… ë‚´ìš© ìš”ì•½

### âœ… ì£¼ìš” ê¸°ëŠ¥

- ROS 2 Humble ìë™ ì„¤ì¹˜ (ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´ ìƒëµ)
- í•„ìˆ˜ ê°œë°œ ë„êµ¬ ì„¤ì¹˜ (`colcon`, `rosdep`, `vcstool` ë“±)
- `rosdep` ì´ˆê¸°í™” ë° ì˜ì¡´ì„± ì„¤ì¹˜
- GitHub ì €ì¥ì†Œ í´ë¡  ë° `ros2_ws` ë³µì‚¬
- colcon ë¹Œë“œ
- `.bashrc` ìë™ ë“±ë¡
- ì¸í„°ë„· ì—°ê²° í™•ì¸ ë° ë¡œì¼€ì¼ ì„¤ì • í¬í•¨
- ë¹Œë“œ ì„±ê³µ í”Œë˜ê·¸ íŒŒì¼ ìƒì„±

---

## ğŸ’» ì „ì²´ ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash

REPO_URL="https://github.com/yourusername/yourrepo.git"
CLONE_DIR="$HOME/temp_cow_repo"
TARGET_WS="$HOME/ros2_ws"

# ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
sudo apt update && sudo apt upgrade -y

# ROS 2 Humble ì„¤ì¹˜
if ! dpkg -s ros-humble-desktop > /dev/null 2>&1; then
  sudo apt install -y locales
  sudo locale-gen en_US en_US.UTF-8
  sudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8
  export LANG=en_US.UTF-8

  sudo apt install -y software-properties-common
  sudo add-apt-repository universe
  sudo apt update
  sudo apt install -y curl
  sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo tee /usr/share/keyrings/ros-archive-keyring.gpg > /dev/null
  echo "deb [signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null
  sudo apt update
  sudo apt install -y ros-humble-desktop
fi

# ê°œë°œ ë„êµ¬ ì„¤ì¹˜
sudo apt install -y \
  python3-colcon-common-extensions \
  python3-rosdep \
  python3-vcstool \
  python3-argcomplete \
  python3-pip \
  build-essential \
  cmake \
  git

# rosdep ì´ˆê¸°í™”
if [ ! -f "/etc/ros/rosdep/sources.list.d/20-default.list" ]; then
  sudo rosdep init
fi

rosdep_retry=0
until rosdep update || [ $rosdep_retry -eq 3 ]; do
  echo "âš ï¸ rosdep update failed, retrying..."
  sleep 2
  rosdep_retry=$((rosdep_retry + 1))
done

# Git ì €ì¥ì†Œ í´ë¡ 
mkdir -p "$CLONE_DIR"
git clone "$REPO_URL" "$CLONE_DIR" --depth 1

# ros2_ws ë³µì‚¬
mkdir -p "$TARGET_WS"
cp -r "$CLONE_DIR/cow/raspberrypi/ros2_ws/"* "$TARGET_WS"

# ì˜ì¡´ì„± ì„¤ì¹˜
cd "$TARGET_WS"
source /opt/ros/humble/setup.bash
rosdep install --from-paths src --ignore-src -r -y

# ë¹Œë“œ
colcon build --symlink-install --cmake-clean-cache

# ë¹Œë“œ ì„±ê³µ í”Œë˜ê·¸
if [ $? -eq 0 ]; then
  touch "$TARGET_WS/.ros2_build_success"
  echo "âœ… Build success"
else
  echo "âŒ Build failed"
  exit 1
fi

# .bashrc ìë™ ë“±ë¡
if ! grep -Fxq "source ~/ros2_ws/install/setup.bash" ~/.bashrc; then
  echo "source ~/ros2_ws/install/setup.bash" >> ~/.bashrc
fi
```

---

## ğŸ“¦ ì¶”ê°€ íŒ

- Raspberry Pi ì„±ëŠ¥ì´ ë‚®ì€ ê²½ìš° `swap` ì„¤ì • ë˜ëŠ” `colcon build -j2` ì œí•œì„ ì¶”ì²œ
- ì˜ì¡´ì„± ë¬¸ì œ ë°œìƒ ì‹œ `rosdep update` ì¬ì‹œë„ ê°€ëŠ¥
- `.ros2_build_success` íŒŒì¼ë¡œ ìë™í™”ëœ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì„±ê³µ ì—¬ë¶€ íŒë‹¨ ê°€ëŠ¥

---

## ğŸ“ ì°¸ê³ 

- ROS 2 Humble ì„¤ì¹˜ ë¬¸ì„œ: [https://docs.ros.org/en/humble/Installation.html](https://docs.ros.org/en/humble/Installation.html)
- colcon: ROS 2 ë¹Œë“œ ë„êµ¬ ([ê³µì‹ ë¬¸ì„œ](https://colcon.readthedocs.io))

---
